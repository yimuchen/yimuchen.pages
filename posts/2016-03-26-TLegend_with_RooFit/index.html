<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
		<link href="../../_app/immutable/assets/0.COE_kSqZ.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/5.DCIUOyEa.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/2017-02-17-TEXTip_custompackage.BJ_OyN1F.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/2017-11-10-Stamps.fmqiAiqW.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/2019-07-31-resistorcalc.CCVtijh-.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.Dm820pXR.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/entry.BqO3rIaC.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.D0k7T8uo.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.D9n5n-wJ.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/paths.CjcAIcQG.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.CPmBryS9.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.D6kgxu3v.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.BWiPcvWN.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.D8sHrsHZ.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.DkfvVG74.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.CdQvNdX5.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/5.b-uQLw-F.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.D6YF6ztN.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/posts.CXhWDRWx.js"><title>Using TLegend in with RooPlot</title><!-- HEAD_svelte-tef83d_START --><!-- HEAD_svelte-tef83d_END -->
  </head>
  <body>
    <div>  <button id="showButton" class="svelte-16eha3j"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path><!-- HTML_TAG_END --></svg></button>  <main> <header style="background-image: url(&quot;../../image/banner/code_head_1.png&quot;);" class="svelte-a9w2ls"><h1 class="svelte-a9w2ls">Using TLegend in with RooPlot</h1> <p>2016.Mar.26</p></header> <article class="content-container"><nav class="toc" data-svelte-h="svelte-1kx00zi"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#storing-the-plotted-objects-of-roofit">Storing the plotted objects of Roofit</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#getting-the-plotted-objects">Getting the plotted objects</a></li></ol></li></ol></nav> <p data-svelte-h="svelte-1jyrugk">If you have used <a href="https://root.cern.ch/" rel="nofollow">Root</a> and
<a href="https://root.cern.ch/roofit" rel="nofollow">RooFit</a>, you will notice that the two system uses
apparently different plotting interfaces. This poses some problems when you are
attempting to plot RooFit objects together with Root objects. In particular,
using <a href="https://root.cern.ch/doc/master/classTLegend.html" rel="nofollow"><code>TLegend</code></a> objects
alongside RooFit objects.</p> <h1 id="storing-the-plotted-objects-of-roofit" data-svelte-h="svelte-5ai2kf"><a aria-hidden="true" tabindex="-1" href="#storing-the-plotted-objects-of-roofit"><span class="icon icon-link"></span></a>Storing the plotted objects of Roofit</h1> <p data-svelte-h="svelte-lij5l3">When plotting with RooFit, we typically use something below:</p> <div class="code-block-container" data-svelte-h="svelte-1s1iwia"><div class="code-block-header">Example RooFit plotting routing <span class="code-block-lang">[cpp]</span></div> <div class="code-block code-block-numbered numbered-start-0 code-copyable"><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line" data-line="1"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;RooFit.h&quot;</span></span>
<span class="line" data-line="2"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;RooRealVar.h&quot;</span></span>
<span class="line" data-line="3"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;RooDataSet.h&quot;</span></span>
<span class="line" data-line="4"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;RooGaussian.h&quot;</span></span>
<span class="line" data-line="5"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;TCanvas.h&quot;</span></span>
<span class="line" data-line="6"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;RooPlot.h&quot;</span></span>
<span class="line" data-line="7"><span style="color:#F92672">#include</span><span style="color:#E6DB74"> &quot;TAxis.h&quot;</span></span>
<span class="line" data-line="8"><span style="color:#F8F8F2">using </span><span style="color:#66D9EF;font-style:italic">namespace</span><span> </span><span style="color:#A6E22E;text-decoration:underline">RooFit</span><span style="color:#F8F8F2"> ;</span></span>
<span class="line" data-line="9"></span>
<span class="line" data-line="10"><span style="color:#66D9EF;font-style:italic">void</span><span style="color:#A6E22E"> rf101_basics</span><span style="color:#F8F8F2">()</span></span>
<span class="line" data-line="11"><span style="color:#F8F8F2">{</span></span>
<span class="line" data-line="12"><span style="color:#F8F8F2">  RooRealVar </span><span style="color:#A6E22E">x</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">&quot;x&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#E6DB74">&quot;x&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#F92672">-</span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">,</span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">) ;</span></span>
<span class="line" data-line="13"><span style="color:#F8F8F2">  RooRealVar </span><span style="color:#A6E22E">mean</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">&quot;mean&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#E6DB74">&quot;mean of gaussian&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">,</span><span style="color:#F92672">-</span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">,</span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">) ;</span></span>
<span class="line" data-line="14"><span style="color:#F8F8F2">  RooRealVar </span><span style="color:#A6E22E">sigma</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">&quot;sigma&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#E6DB74">&quot;width of gaussian&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">,</span><span style="color:#AE81FF">0.1</span><span style="color:#F8F8F2">,</span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">) ;</span></span>
<span class="line" data-line="15"><span style="color:#F8F8F2">  RooGaussian </span><span style="color:#A6E22E">gauss</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">&quot;gauss&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#E6DB74">&quot;gaussian PDF&quot;</span><span style="color:#F8F8F2">,x,mean,sigma) ;</span></span>
<span class="line" data-line="16"></span>
<span class="line" data-line="17"><span style="color:#F8F8F2">  RooPlot</span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> xframe </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> x.</span><span style="color:#A6E22E">frame</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E">Title</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">&quot;Gaussian p.d.f.&quot;</span><span style="color:#F8F8F2">)) ;</span></span>
<span class="line" data-line="18"><span style="color:#F8F8F2">  gauss.</span><span style="color:#A6E22E">plotOn</span><span style="color:#F8F8F2">(xframe) ;</span></span>
<span class="line" data-line="19"><span style="color:#F8F8F2">  sigma.</span><span style="color:#A6E22E">setVal</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">3</span><span style="color:#F8F8F2">) ;</span></span>
<span class="line" data-line="20"><span style="color:#F8F8F2">  gauss.</span><span style="color:#A6E22E">plotOn</span><span style="color:#F8F8F2">(xframe,</span><span style="color:#A6E22E">LineColor</span><span style="color:#F8F8F2">(kRed)) ;</span></span>
<span class="line" data-line="21"><span style="color:#F8F8F2">}</span></span></code></pre></div></div> <p data-svelte-h="svelte-snmavz">Now we suppose we want to generate a
<a href="https://root.cern.ch/doc/master/classTLegend.html" rel="nofollow"><code>TLegend</code></a> object to legend
the objects that are being plotted. If you are familiar with <code>TLegend</code>, this is
done through the function:</p> <div class="code-block-container" data-svelte-h="svelte-1ltnuww"><div class="code-block-header"><span class="code-block-lang">[cpp]</span></div> <div class="code-block "><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">tlegend_instance.</span><span style="color:#A6E22E">AddEntry</span><span style="color:#F8F8F2">( </span><span style="color:#F92672">&lt;</span><span style="color:#F8F8F2">tobject_pointer</span><span style="color:#F92672">&gt;</span><span style="color:#F8F8F2"> , </span><span style="color:#E6DB74">&quot;&lt;Description_in_legend&gt;&quot;</span><span style="color:#F8F8F2"> , </span><span style="color:#E6DB74">&quot;&lt;plot_settings&gt;&quot;</span><span style="color:#F8F8F2">)</span></span></code></pre></div></div> <p data-svelte-h="svelte-jnvcx5">The problem now is what are the <code>TObject</code> pointer that we need to pass over to
the <code>TLegend</code> method? It cannot be the <code>gauss</code> instance in the code above,
since it is used twice in the plotting function, so what is it?</p> <h2 id="getting-the-plotted-objects" data-svelte-h="svelte-1iosmx"><a aria-hidden="true" tabindex="-1" href="#getting-the-plotted-objects"><span class="icon icon-link"></span></a>Getting the plotted objects</h2> <p data-svelte-h="svelte-1lngsf6">It turns out when you call the
<a href="https://root.cern.ch/doc/master/classRooAbsData.html#a41ef49f1f48f06ae9e5fd197c820aeb1" rel="nofollow"><code>plotOn()</code></a>
method, it generates a
<a href="https://root.cern.ch/doc/master/classTGraph.html" rel="nofollow"><code>TGraph</code></a> object stored in
the <a href="https://root.cern.ch/doc/master/classRooPlot.html" rel="nofollow"><code>RooPlot</code></a> instance.
You could actually get a list of all these objects by the simple snippet:</p> <div class="code-block-container" data-svelte-h="svelte-2pi6ix"><div class="code-block-header"><span class="code-block-lang">[cpp]</span></div> <div class="code-block code-copyable"><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F92672">for</span><span style="color:#F8F8F2">( </span><span style="color:#66D9EF;font-style:italic">int</span><span style="color:#F8F8F2"> i </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> 0</span><span style="color:#F8F8F2"> ; i </span><span style="color:#F92672">&lt;</span><span style="color:#F8F8F2"> xframe-&gt;</span><span style="color:#A6E22E">numItems</span><span style="color:#F8F8F2">() ; </span><span style="color:#F92672">++</span><span style="color:#F8F8F2">i ){</span></span>
<span class="line"><span style="color:#F8F8F2">    cout </span><span style="color:#F92672">&lt;&lt;</span><span style="color:#F8F8F2"> xframe-&gt;</span><span style="color:#A6E22E">getObject</span><span style="color:#F8F8F2">( i )-&gt;</span><span style="color:#A6E22E">GetName</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div></div> <p data-svelte-h="svelte-2cib10">But there is a much better way of getting this thing, without having to guess
which name corresponds to which object you have just plotted on the <code>RooPlot</code>
object. By directly getting storing the object after you have called the
<code>plotOn()</code> method:</p> <div class="code-block-container" data-svelte-h="svelte-1y7t17r"><div class="code-block-header"><span class="code-block-lang">[cpp]</span></div> <div class="code-block code-copyable"><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">gauss.</span><span style="color:#A6E22E">plotOn</span><span style="color:#F8F8F2">(xframe);</span></span>
<span class="line"><span style="color:#F8F8F2">TGraph</span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> gauss_graph </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> (TGraph</span><span style="color:#F92672">*</span><span style="color:#F8F8F2">)xframe-&gt;</span><span style="color:#A6E22E">getObject</span><span style="color:#F8F8F2">( xframe-&gt;</span><span style="color:#A6E22E">numItems</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">-</span><span style="color:#AE81FF"> 1</span><span style="color:#F8F8F2"> );</span></span></code></pre></div></div> <p data-svelte-h="svelte-1y33k50">There is another merit of using this method. You could manually define the plot
style using ROOT flavored methods rather than using stuffing it all in the
<code>plotOn()</code> methods call!</p> <div class="code-block-container" data-svelte-h="svelte-b5dol2"><div class="code-block-header"><span class="code-block-lang">[cpp]</span></div> <div class="code-block code-copyable"><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">gauss_graph-&gt;</span><span style="color:#A6E22E">SetFillStyle</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">3004</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">gauss-&gt;</span><span style="color:#A6E22E">SetLineColor</span><span style="color:#F8F8F2">( kGreen );</span></span></code></pre></div></div> <p data-svelte-h="svelte-1k3e3f5">This gives you much more flexibility on the plots you are getting! Since not
all <a href="https://root.cern.ch/doc/master/classTGraphPainter.html" rel="nofollow">TGraphPainter</a>
are not accessible with the RooFit <code>plotOn</code> <a href="https://root.cern.ch/doc/master/classRooAbsPdf.html#ae19cd5285edf475b744819b72d3ca517" rel="nofollow">methods</a>.</p> <p data-svelte-h="svelte-pxoxrs">So now we could use the <code>TLegend</code> object as expected with this method!</p> <div class="code-block-container" data-svelte-h="svelte-1h3npri"><div class="code-block-header"><span class="code-block-lang">[cpp]</span></div> <div class="code-block code-copyable"><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E;text-decoration:underline">TLegend</span><span style="color:#A6E22E"> l</span><span style="color:#F8F8F2">( </span><span style="color:#AE81FF">0.6</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">0.6</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">0.9</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">0.9</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">l.</span><span style="color:#A6E22E">AddEntry</span><span style="color:#F8F8F2">( gauss_graph , </span><span style="color:#E6DB74">&quot;My Description&quot;</span><span style="color:#F8F8F2"> , </span><span style="color:#E6DB74">&quot;fl&quot;</span><span style="color:#F8F8F2"> );</span></span>
<span class="line"><span style="color:#F8F8F2">l.</span><span style="color:#A6E22E">Draw</span><span style="color:#F8F8F2">();</span></span></code></pre></div></div> <hr> <p data-svelte-h="svelte-15w6jv3">Hopefully this quick snippet has been useful!</p></article> <footer class="svelte-a9w2ls"><span class="foot-header svelte-a9w2ls" data-svelte-h="svelte-1vhgsge">Tags</span><br> <span class="svelte-a9w2ls"><a href="../../tags/#root">root</a></span><span class="svelte-a9w2ls"><a href="../../tags/#roofit">roofit</a></span><span class="svelte-a9w2ls"><a href="../../tags/#plotting">plotting</a></span></footer> <div class="side-bar svelte-ype9gw"><button class="svelte-ype9gw"><div id="side-toggler-hide"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"></path><!-- HTML_TAG_END --></svg></div> <div id="side-toggler-show"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"></path><!-- HTML_TAG_END --></svg></div></button> <div class="side-bar-button"></div> <div class="side-bar-slider"><div class="side-bar-content svelte-ype9gw"><h2 class="side-bar-header svelte-ype9gw" data-svelte-h="svelte-r83smw">Outline</h2> <div id="side-bar-list"></div></div></div> </div></main> <footer class="svelte-ze0gu2"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path><!-- HTML_TAG_END --></svg> <a href="https://github.com/yimuchen/" data-svelte-h="svelte-1lnvvne">Find me on GitHub</a> </footer> 
			
			<script>
				{
					__sveltekit_12ygjw2 = {
						base: new URL("../..", location).pathname.slice(0, -1),
						assets: "/yimuchen.pages"
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.Dm820pXR.js"),
						import("../../_app/immutable/entry/app.CPmBryS9.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
