<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
		<link href="../../_app/immutable/assets/0.COE_kSqZ.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/5.DCIUOyEa.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/2017-02-17-TEXTip_custompackage.BJ_OyN1F.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/2017-11-10-Stamps.fmqiAiqW.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/2019-07-31-resistorcalc.CCVtijh-.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.CfNWxFgY.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/entry.ChXo_7W6.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.D0k7T8uo.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.D9n5n-wJ.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/paths.CWVLUeLs.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.CG8mIXgs.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.D6kgxu3v.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.BWiPcvWN.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.Dzi52tLC.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.DkfvVG74.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.CdQvNdX5.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/5.CwydSqbh.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.D6YF6ztN.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/posts.CXhWDRWx.js"><title>Migrating blog to Svelte</title><!-- HEAD_svelte-tef83d_START --><!-- HEAD_svelte-tef83d_END -->
  </head>
  <body>
    <div>  <button id="showButton" class="svelte-16eha3j"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path><!-- HTML_TAG_END --></svg></button>  <main> <header style="background-image: url(&quot;../../image/banner/code_head_1.png&quot;);" class="svelte-a9w2ls"><h1 class="svelte-a9w2ls">Migrating blog to Svelte</h1> <p>2024.Apr.18</p></header> <article class="content-container"><nav class="toc" data-svelte-h="svelte-8neft5"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#the-technical-reasons">The technical reasons</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#why-svelte">Why svelte?</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#the-logistics-reason">The logistics reason</a></li></ol></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#some-nice-updates">Some nice updates</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#updated-code-highlighting">Updated code highlighting</a></li><li class="toc-item toc-item-h3"><a class="toc-link toc-link-h3" href="#site-theming-toggles">Site theming toggles</a></li></ol></li></ol></nav> <p data-svelte-h="svelte-2wsst8">If you are reading this via an external link, and if you have seen my other
posts, you might think that this looks different. This is because I have now
moved the blog both to a new framework (<a href="https://svelte.dev/" rel="nofollow">Svelte</a>), and a new GitHub
<a href="https://github.com/yimuchen/yimuchen.pages" rel="nofollow">repository</a>. Here we will go over some of the reasons of why I decided
to do this.</p> <h2 id="the-technical-reasons" data-svelte-h="svelte-hv393"><a aria-hidden="true" tabindex="-1" href="#the-technical-reasons"><span class="icon icon-link"></span></a>The technical reasons</h2> <p data-svelte-h="svelte-1rcqqsf">If you did not know, <a href="https://pages.github.com/" rel="nofollow">GitHub pages</a> are usually generated using
<a href="https://jekyllrb.com/" rel="nofollow">Jekyll</a> to convert your collection of markdown files to the static
HTML pages that you see in the browser. The problem I had with Jekyll is that
the conversion of the markdown file to HTML components, as well as the handling
of the layout that is outside the main mark down documents (think how the
headers, navigation, and other items) are handled in a rather opaque ruby
package, meaning that to add additional items, you will likely need to handled
markdown with injected HTML tags and additional modifications with hacked
together JavaScript. One of the motivations looking for a JavaScript framework
to make the static sight is that (I hope) will be easier to handle the HTML
elements in a more streamline fashion, as well as having easier access to
directly the HTML layout.</p> <p data-svelte-h="svelte-17rb2ug">Additionally, I’m also not a fan of how “variables” are handled in Jekyll using
YAML, meaning that aside from HTML/CSS/JavaScript files, and the content
markdown files, I also need to keep track of additional “data” file, that has
yet another format. The flexibility of JavaScript frameworks, is that the
parsing of markdown files can technically be handled anywhere if I want to
specify, meaning that the handling of “data” can be done easily with markdown
files with injected metadata.</p> <h3 id="why-svelte" data-svelte-h="svelte-1ilxykk"><a aria-hidden="true" tabindex="-1" href="#why-svelte"><span class="icon icon-link"></span></a>Why svelte?</h3> <p data-svelte-h="svelte-1try0fh">Now comes the problem: out of the every-growing list of JavaScript framework,
why choose Svelte? While I had some <a href="https://github.com/UMDCMS/SiPMCalibControl" rel="nofollow">experience</a> with <a href="https://react.dev/" rel="nofollow">React</a>,
I felt that working with the “virtual DOMs” is definitely not something I want
to work with when the website is largely static, as it looses the benefit of
directly mangling the DOM if I want to make some small changes. Being a fan of
<a href="https://www.youtube.com/@ThePrimeagen" rel="nofollow">ThePrimeagen</a>, I was thinking if <a href="https://htmx.org/" rel="nofollow">HTMX</a> is possible. However,
since HTMX relies typically on the server side to make rendering adjustment, I
wasn’t confident that I can make this work with the purely static site hosting
of GitHub pages. So I went with the other “new” framework that I heard of,
which just happened to be <a href="https://svelte.dev/" rel="nofollow">Svelte</a>.</p> <p data-svelte-h="svelte-1y3anzy">A <a href="https://www.okupter.com/blog/deploy-sveltekit-website-to-github-pages" rel="nofollow">quick google search</a> showed that it is rather simple to
generate static sites locally on my machine then push the static sites to
GitHub, so I decided to dive in. And gave me the push that I need. Some of the
new niceties of using Svelte compared with what I can do with Jekyll, will be
showcased later!</p> <h3 id="the-logistics-reason" data-svelte-h="svelte-1roh3bo"><a aria-hidden="true" tabindex="-1" href="#the-logistics-reason"><span class="icon icon-link"></span></a>The logistics reason</h3> <p data-svelte-h="svelte-1r4ggjk">Having the old blog repository accumulated for over 8 years, some of the posts
have <a href="https://en.wiktionary.org/wiki/age_like_milk" rel="nofollow">aged like fine milk</a>. While for some posts, it is interesting to
look at what sort of mindset changed over time, there are posts really do not
event provide any reflective values. That combined with my original setup with
Jekyll making it incredibly frustrating to update the CV page, made me decide
to start over from scratch.</p> <p data-svelte-h="svelte-178fnd5">The idea is that I will only migrate over posts that are of STEM topics, as
even if what I wrote did turn out to be wrong, it would be interesting to see
what goes wrong, while pure opinion pieces doesn’t really add much if it ends
up being a poor writing.</p> <p data-svelte-h="svelte-dgse75">Some pure technical posts might take a while to transfer, I am still figuring
out some of the new technologies with svelte (and seeing if there is a better
way to handle multimedia files), so there will likely be some time before
everything is shown.</p> <hr> <p data-svelte-h="svelte-bmt5t9">But enough waffling, let’s show off some of the new tech that I can do with the
new framework!</p> <h2 id="some-nice-updates" data-svelte-h="svelte-zdjbcx"><a aria-hidden="true" tabindex="-1" href="#some-nice-updates"><span class="icon icon-link"></span></a>Some nice updates</h2> <h3 id="updated-code-highlighting" data-svelte-h="svelte-1ksbgfg"><a aria-hidden="true" tabindex="-1" href="#updated-code-highlighting"><span class="icon icon-link"></span></a>Updated code highlighting</h3> <p data-svelte-h="svelte-1kvqgxe">For this framework, I am using <a href="https://github.com/shikijs/shiki" rel="nofollow"><code>shiki</code></a> to handle the code block
highlighting. This allows for additional items that I did not in the old blog, including:</p> <ul data-svelte-h="svelte-5m4vw"><li>Number lining for long code blocks</li> <li>Per-line highlighting to indicate important information</li> <li>Additional header information (like an additional title and the code language)</li> <li>A handy copy button to copy the internal code</li></ul> <p data-svelte-h="svelte-p26wh4">Using the python autocomplete code block as an example:</p> <div class="code-block-container" data-svelte-h="svelte-8p54ft"><div class="code-block-header">Notice magic comment on line 2 and method call on l17 <span class="code-block-lang">[python]</span></div> <div class="code-block code-block-numbered numbered-start-0 code-copyable"><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line" data-line="1"><span style="color:#88846F">#!/usr/bin/env python3</span></span>
<span class="line highlight" data-line="2"><span style="color:#88846F"># PYTHON_ARGCOMPLETE_OK</span></span>
<span class="line" data-line="3"></span>
<span class="line" data-line="4"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> argparse</span></span>
<span class="line" data-line="5"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> argcomplete</span></span>
<span class="line" data-line="6"></span>
<span class="line" data-line="7"><span style="color:#F8F8F2">parser </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> argparse.ArgumentParser(</span></span>
<span class="line" data-line="8"><span style="color:#FD971F;font-style:italic">    prog</span><span style="color:#F92672">=</span><span style="color:#E6DB74">&quot;pdftopng.py&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line" data-line="9"><span style="color:#FD971F;font-style:italic">    description</span><span style="color:#F92672">=</span><span style="color:#E6DB74">&quot;Convert PDF files to high quality PNG files&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line" data-line="10"><span style="color:#F8F8F2">)</span></span>
<span class="line" data-line="11"></span>
<span class="line" data-line="12"><span style="color:#F8F8F2">parser.add_argument(</span><span style="color:#E6DB74">&quot;files&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">type</span><span style="color:#F92672">=</span><span style="color:#66D9EF;font-style:italic">str</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">nargs</span><span style="color:#F92672">=</span><span style="color:#E6DB74">&quot;+&quot;</span><span style="color:#F8F8F2">).completer </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> (</span></span>
<span class="line" data-line="13"><span style="color:#F8F8F2">    argcomplete.FilesCompleter(</span><span style="color:#FD971F;font-style:italic">allowednames</span><span style="color:#F92672">=</span><span style="color:#E6DB74">&quot;*.pdf&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line" data-line="14"><span style="color:#F8F8F2">)</span></span>
<span class="line" data-line="15"><span style="color:#88846F"># ...</span></span>
<span class="line" data-line="16"></span>
<span class="line highlight" data-line="17"><span style="color:#F8F8F2">argcomplete.autocomplete(parser)</span></span>
<span class="line" data-line="18"><span style="color:#F8F8F2">args </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> parser.parse_args()</span></span></code></pre></div></div> <p data-svelte-h="svelte-1d5ot42">Of course, all of these are toggle-able, just in case I want a snippet that is
incomplete or should not be automatically added to clipboards for safety
reasons:</p> <div class="code-block-container" data-svelte-h="svelte-n6asr6"><div class="code-block-header">PLEASE DO NOT COPY THIS <span class="code-block-lang">[bash]</span></div> <div class="code-block "><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E">rm</span><span style="color:#AE81FF"> -rf</span><span style="color:#E6DB74"> .</span><span style="color:#E6DB74"> /</span></span></code></pre></div></div> <h3 id="site-theming-toggles" data-svelte-h="svelte-19ntrwg"><a aria-hidden="true" tabindex="-1" href="#site-theming-toggles"><span class="icon icon-link"></span></a>Site theming toggles</h3> <p data-svelte-h="svelte-r7xv6u">There is now a site color theme toggle that one can use in the hamburger menu!
This toggle is persistent, so if you prefer reading in light mode, you only
need to toggle this button once and the changes should persist (at least until
you clear your browser cookies).</p> <p data-svelte-h="svelte-1t6qy9s">I’m still working on having the site use cookies to remember which setting to
use, but at least we now have a toggle!</p> <hr> <p data-svelte-h="svelte-1xmlsr6">Certain content pages are still under construction, but the majority of posts
that I feel remains relevant should have been migrated over. Hopefully this
fresh framework motivates me to write here more often.</p></article> <footer class="svelte-a9w2ls"><span class="foot-header svelte-a9w2ls" data-svelte-h="svelte-1vhgsge">Tags</span><br> <span class="svelte-a9w2ls"><a href="../../tags/#computing">computing</a></span><span class="svelte-a9w2ls"><a href="../../tags/#notes">notes</a></span><span class="svelte-a9w2ls"><a href="../../tags/#thoughts">thoughts</a></span><span class="svelte-a9w2ls"><a href="../../tags/#javascript">javascript</a></span></footer> <div class="side-bar svelte-ype9gw"><button class="svelte-ype9gw"><div id="side-toggler-hide"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"></path><!-- HTML_TAG_END --></svg></div> <div id="side-toggler-show"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"></path><!-- HTML_TAG_END --></svg></div></button> <div class="side-bar-button"></div> <div class="side-bar-slider"><div class="side-bar-content svelte-ype9gw"><h2 class="side-bar-header svelte-ype9gw" data-svelte-h="svelte-r83smw">Outline</h2> <div id="side-bar-list"></div></div></div> </div></main> <footer class="svelte-ze0gu2"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- HTML_TAG_START --><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path><!-- HTML_TAG_END --></svg> <a href="https://github.com/yimuchen/" data-svelte-h="svelte-1lnvvne">Find me on GitHub</a> </footer> 
			
			<script>
				{
					__sveltekit_4f47hs = {
						base: new URL("../..", location).pathname.slice(0, -1),
						assets: "/yimuchen.pages"
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.CfNWxFgY.js"),
						import("../../_app/immutable/entry/app.CG8mIXgs.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
